---
description:
globs:
---
---
title: Operation Modes Rules
version: 1.0.0
date: 2025-01-31
status: Active
dependencies:
  - 00-base.rules.mdc
  - 40-error-handling.rules.mdc
  - 41-logging.rules.mdc
patterns:
  inherit:
    - python.source
  local:
    modes:
      - "src/**/modes.py"
      - "src/**/operations.py"
    exclude:
      - "src/legacy/**/*.py"
      - "src/deprecated/**/*.py"
---

# Operation Modes Rules
# Version: 1.0.0
# Purpose: Define operation modes and transition rules
# @since: 1.0.0
# @updated: 2025-01-31
# @requires: @rule(40-error-handling.rules.mdc:error_procedures)

# <section: metadata>
metadata:
    version_history:
        1.0.0:
            date: "2025-01-31"
            changes:
                - "Initial version"
                - "Defined operation modes"
                - "Added transition rules"
                - "Established safety controls"

    dependencies:
        - "@rule(00-base.rules.mdc:code_standards)"
        - "@rule(40-error-handling.rules.mdc:error_procedures)"
        - "@rule(41-logging.rules.mdc:log_levels)"
# </section: metadata>

# <section: mode_definitions>
# @purpose: Define operation modes and their characteristics
mode_definitions:
    plan_mode:
        trigger: "-plan"
        description: "Analysis and planning mode without system modifications"
        characteristics:
            - "Read-only operations"
            - "Impact analysis"
            - "Resource estimation"
            - "Safety validation"
            - "Plan generation"
        indicators:
            - "Mode indicator: [PLAN]"
            - "Read-only operations enforced"
        restrictions:
            - "No file system changes"
            - "No state modifications"
            - "No external API calls"
            - "No resource allocation"
            - "No command execution"

    act_mode:
        trigger: "-act"
        description: "Execution mode for system modifications"
        characteristics:
            - "Write operations"
            - "State changes"
            - "Resource management"
            - "Command execution"
            - "External interactions"
        indicators:
            - "Mode indicator: [ACT]"
            - "Write operations enabled"
        requirements:
            - "Valid trigger command"
            - "Basic safety checks"
            - "Resource validation"

# <section: transition_rules>
# @purpose: Define mode transition requirements and processes
transition_rules:
    requirements:
        - "Valid trigger command"
        - "Basic safety checks"
        - "Clean system state"

    process:
        pre_transition:
            - "Basic state check"
            - "Mode compatibility"

        execution:
            - "Mode switch"
            - "Permission updates"
            - "Logging transition"

        post_transition:
            - "Mode indicator update"
            - "Operation confirmation"
            - "User notification"

# <section: restrictions>
# @purpose: Define mode-specific restrictions and controls
restrictions:
    plan_mode:
        filesystem:
            - "Read-only access"
            - "No file creation"
            - "No modifications"
            - "No deletions"
            - "Path validation"

        operations:
            - "Analysis only"
            - "Resource estimation"
            - "Impact assessment"
            - "Plan validation"
            - "Safety checks"

    act_mode:
        filesystem:
            - "Workspace limits"
            - "Permission checks"
            - "Change tracking"
            - "Backup creation"
            - "State preservation"

        operations:
            - "Authorization required"
            - "Resource limits"
            - "Operation logging"
            - "State tracking"
            - "Rollback points"

        processing_limits:
            - "Default --limit of 5 items required"
            - "Override only with explicit user command"
            - "Use --processor when targeting specific processor"
            - "Document any limit overrides in logs"
            - "Monitor context window usage"

        testing:
            bug_fixes:
                - "Reproduction test case required first"
                - "Test must demonstrate bug before fix"
                - "Skip only if integration too complex"
                - "Document skipped test cases"
                - "Include bug reference in test"

            source_data:
                - "Use real config directories"
                - "Enforce --limit in tests"
                - "Use --processor when applicable"
                - "Maintain test fixtures"
                - "Document data requirements"

# <section: override_procedures>
# @purpose: Define emergency override protocols
override_procedures:
    authorization:
        - "Admin credentials"
        - "Emergency protocol"
        - "Time limitation"
        - "Scope restriction"
        - "Full logging"

    process:
        - "Override request"
        - "Risk assessment"
        - "Authorization check"
        - "Mode transition"
        - "Enhanced monitoring"

    limitations:
        - "Time-bound access"
        - "Restricted operations"
        - "Mandatory logging"
        - "Review requirement"
        - "Auto-expiration"

# <section: workflows>
# @purpose: Define mode-specific operational workflows
workflows:
    plan_mode:
        analysis:
            - "Resource scanning"
            - "Impact assessment"
            - "Dependency check"
            - "Risk evaluation"
            - "Plan generation"

        validation:
            - "Safety checks"
            - "Resource validation"
            - "Permission verification"
            - "State assessment"
            - "Plan review"

    act_mode:
        execution:
            - "Pre-execution check"
            - "Resource allocation"
            - "Operation execution"
            - "State tracking"
            - "Result validation"

        monitoring:
            - "Resource usage"
            - "Operation progress"
            - "State changes"
            - "Error detection"
            - "Performance metrics"

# <section: safety_controls>
# @purpose: Define operational safety measures
safety_controls:
    validation:
        - "Permission checks"
        - "Resource limits"
        - "State validation"
        - "Operation safety"
        - "Impact assessment"

    monitoring:
        - "Resource usage"
        - "Operation status"
        - "Error detection"
        - "Performance metrics"
        - "Security events"

    protection:
        - "Resource isolation"
        - "State preservation"
        - "Error prevention"
        - "Data protection"
        - "Access control"

# <section: best_practices>
# @purpose: Define operational best practices
best_practices:
    general:
        - "Clear documentation"
        - "User communication"
        - "Safety first"
        - "Resource efficiency"
        - "Error prevention"

    mode_specific:
        plan:
            - "Thorough analysis"
            - "Complete validation"
            - "Clear documentation"
            - "Risk assessment"
            - "User feedback"
        act:
            - "Careful execution"
            - "Continuous monitoring"
            - "State tracking"
            - "Error handling"
            - "Result verification"

    maintenance:
        - "Regular review"
        - "Process updates"
        - "Documentation"
        - "Training"
        - "Improvement"
